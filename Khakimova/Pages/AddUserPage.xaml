<Page x:Class="Khakimova.Pages.AddUserPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Add/Edit User" Height="544" Width="513">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="50" />
            <RowDefinition Height="50" />
            <RowDefinition Height="50" />
            <RowDefinition Height="100" />
            <RowDefinition Height="90" />
            <RowDefinition Height="20" />
            <RowDefinition Height="80" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="150" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <TextBlock Text="Логин" Grid.Column="0" Margin="10,0,10,0" FontSize="16" VerticalAlignment="Center" Height="20"/>
        <TextBlock Text="Пароль" Grid.Row="1" Grid.Column="0" Margin="10,0,10,0" FontSize="16" VerticalAlignment="Center" Height="20"/>
        <TextBlock Text="Роль" Grid.Row="2" Grid.Column="0" Margin="10,0,10,0" FontSize="16" VerticalAlignment="Center" Height="20"/>
        <TextBlock Text="ФИО" Grid.Row="3" Grid.Column="0" Margin="10,0,10,0" FontSize="16" VerticalAlignment="Center" Height="20"/>
        <TextBlock Text="Фото" Grid.Row="4" Grid.Column="0" Margin="10,0,10,0" FontSize="16" VerticalAlignment="Center" Height="18"/>

        <TextBox x:Name="TBLogin" Text="{Binding Login}" Grid.Row="0" Grid.Column="1" Margin="10,10,10,10" ToolTip="Введите логин" FontSize="14"/>
        <TextBox x:Name="TBPass" Text="{Binding Password}" Grid.Column="1" Grid.Row="1" Margin="10,10,10,10" ToolTip="Введите пароль" FontSize="14"/>

        <ComboBox x:Name="cmbRole" Grid.Row="2" Grid.Column="1" Margin="10,10,10,10" ToolTip="Выберите роль" FontSize="14">
            <ComboBoxItem Content="Admin"/>
            <ComboBoxItem Content="User"/>
        </ComboBox>

        <TextBox x:Name="TBFio" Text="{Binding FIO}" Grid.Row="3" Grid.Column="1" Margin="10,10,10,10" ToolTip="Введите ФИО" FontSize="14"/>

        <!-- Улучшенная секция для выбора фото -->
        <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Vertical" Margin="10,5,10,5">
            <Button x:Name="ButtonSelectPhoto" Content="📷 Выбрать фото" Click="ButtonSelectPhoto_Click" 
                    Padding="15,10" Height="59" FontSize="14" FontWeight="SemiBold"
                    Background="#FF0078D7" Foreground="White" BorderThickness="0"
                    Width="228">
                <Button.Resources>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="CornerRadius" Value="6"/>
                    </Style>
                </Button.Resources>
            </Button>
            <TextBlock x:Name="TBPhotoName" Text="Фото не выбрано" 
                      FontSize="11" Foreground="Gray" HorizontalAlignment="Center"
                      TextWrapping="Wrap" Margin="5,2,5,0"/>
        </StackPanel>

        <!-- Область предпросмотра фото -->
        <Border Grid.Row="5" Grid.Column="1" BorderBrush="LightGray" BorderThickness="2" 
                Background="#FFF8F8F8" HorizontalAlignment="Center" VerticalAlignment="Center"
                CornerRadius="5" Width="180" Height="120">
            <Grid>
                <Image x:Name="UserImage" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"
                       MaxHeight="100" MaxWidth="150" Margin="10"/>
                <TextBlock x:Name="NoImageText" Text="Предпросмотр фото" 
                          HorizontalAlignment="Center" VerticalAlignment="Center"
                          FontSize="12" Foreground="Gray" FontStyle="Italic"/>
            </Grid>
        </Border>

        <TextBlock Grid.Row="6" Grid.Column="1" Text="Предпросмотр" 
                  HorizontalAlignment="Center" VerticalAlignment="Center" 
                  FontSize="10" Foreground="Gray" Height="12" Width="67"/>

        <StackPanel Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" 
                    HorizontalAlignment="Left" VerticalAlignment="Center" Height="72" Margin="-20,0,0,0" Width="532">
            <Button x:Name="ButtonSave" Content="💾 Сохранить" Click="ButtonSave_Click" 
                    Padding="20,10" Height="60" Width="192" FontSize="14" FontWeight="SemiBold"
                    Background="#FF28A745" Foreground="White" Margin="5"/>
            <Button x:Name="ButtonClean" Content="🗑️ Очистить" Click="ButtonClean_Click" 
                    Padding="20,10" Height="61" Width="164" FontSize="13" FontWeight="SemiBold"
                    Background="#FF6C757D" Foreground="White" Margin="5"/>
            <Button x:Name="ButtonBack" Content="← Назад" Click="ButtonBack_Click" 
                    Padding="20,10" Height="62" Width="146" FontSize="13" FontWeight="SemiBold"
                    Background="#FFDC3545" Foreground="White" Margin="5"/>
        </StackPanel>
    </Grid>
</Page>